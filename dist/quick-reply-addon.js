!function(){"use strict";function e(e){if(!e)return;if("undefined"==typeof window)return;const t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}const t=()=>{const e=document.querySelector("form#quick-reply a.close-btn");e&&e.addEventListener("click",(()=>(()=>{const e=document.querySelector("body > form[name='post'] textarea[name='body']");e&&(e.value="")})()))};e("#quick-reply td:has(.formatting-labels) input.btn{display:none}#quick-reply td:has(.formatting-labels) .formatting-labels{display:flex;flex-wrap:nowrap;gap:4px;padding-bottom:1.5px}#quick-reply td:has(.formatting-labels) .formatting-labels label{flex:1;font-size:.75rem;line-height:1rem;text-align:center;text-transform:uppercase;border:1px solid;border-radius:2px;background-color:#fff;cursor:pointer}");const n=e=>{const{id:t,name:n,value:r}=e;return`<label title="${r}" for="${t}">${n}</label>`};e("#quick-reply #upload_file{display:none}");const r=()=>{const e=document.querySelector("form#quick-reply"),t=document.querySelector("form#quick-reply #upload_file"),n=document.querySelector("form#quick-reply #upload .spoiler");if(!t||!n)return;t.insertAdjacentHTML("afterend",'<input id="upload_filename" type="text" name="filename" placeholder="Click to upload file" />');const r=document.getElementById("upload_filename");e&&r&&(r.addEventListener("click",(()=>(e=>{var t,n;(null!==(n=null===(t=e.files)||void 0===t?void 0:t.length)&&void 0!==n?n:1)>0||e.click()})(t))),t.addEventListener("change",(()=>((e,t)=>{var n,r;if((null!==(r=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==r?r:0)<1)return;t.value=e.files[0].name;const l=t.value.length;t.setSelectionRange(l,l)})(t,r))),t.addEventListener("cancel",(()=>(e=>{e.blur()})(r))),e.addEventListener("submit",(()=>((e,t)=>{var n,r;if((null!==(r=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==r?r:0)<1)return;const l=e.files[0],o=t.value,i=new File([l],o,{type:l.type,lastModified:l.lastModified}),a=new DataTransfer;a.items.add(i),e.files=a.files})(t,r))))},l=()=>{r(),(()=>{const e=document.querySelector("form#quick-reply tr:has(input[name='b'])");if(!e)return;const t=e.firstElementChild;if(!t)return;t.insertAdjacentHTML("beforeend","<div class='formatting-labels'></div>");const r=t.lastElementChild,l=e.querySelectorAll("input.btn");for(const e of l)e.id="q-"+e.name+"-btn",r.insertAdjacentHTML("beforeend",n(e))})(),t(),(()=>{const e=document.querySelector("form#quick-reply textarea[name='body']"),t=document.querySelector("form#quick-reply #upload_file");null==e||e.addEventListener("paste",(e=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(!r||r.length>1)return;const l=r[0];if(!l.type.startsWith("image/"))return;const o=l.getAsFile();if(!o||!t)return;const i=new DataTransfer;i.items.add(o),t.files=i.files,t.dispatchEvent(new Event("change",{bubbles:!0}))}))})()};try{((e,t,n=!1)=>{if(document.body.querySelector(e))return void t();new MutationObserver(((r,l)=>{for(const o of r)for(const r of o.addedNodes)if(1===r.nodeType&&r.matches(e))return t(),void(n&&l.disconnect())})).observe(document.body,{childList:!0,subtree:!0})})("form#quick-reply",l)}catch(e){console.log("[quick-reply-addon]",e)}}();
//# sourceMappingURL=quick-reply-addon.js.map
