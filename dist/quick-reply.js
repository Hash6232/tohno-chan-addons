!function(){"use strict";function e(e){if(!e)return;if("undefined"==typeof window)return;const t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}e("#quick-reply input#upload_file{display:none}#quick-reply:has(input#upload_filename:placeholder-shown) tr#upload>:last-child{display:none}");const t=()=>{const e=document.querySelector("#quick-reply"),t=document.querySelector("#quick-reply input#upload_file"),n=document.querySelector("#quick-reply tr#upload");if(!t||!n)return;t.insertAdjacentHTML("afterend",'<input id="upload_filename" type="text" name="filename" placeholder="No file selected." />');const r=document.getElementById("upload_filename");n.insertAdjacentHTML("beforeend",'<td><a id="reset-qr-fileinput" href="javascript:;" title="Remove attachment">Ã—</a></td>');const i=document.getElementById("reset-qr-fileinput");e&&r&&i&&(r.addEventListener("click",(()=>(e=>{var t,n;(null!==(n=null===(t=e.files)||void 0===t?void 0:t.length)&&void 0!==n?n:1)>0||e.click()})(t))),t.addEventListener("change",(()=>((e,t)=>{var n,r;if((null!==(r=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==r?r:0)<1)return;t.value=e.files[0].name;const i=t.value.length;t.setSelectionRange(i,i)})(t,r))),t.addEventListener("cancel",(()=>(e=>{e.blur()})(r))),e.addEventListener("submit",(()=>((e,t)=>{var n,r;if((null!==(r=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==r?r:0)<1)return;const i=e.files[0],l=t.value,o=new File([i],l,{type:i.type,lastModified:i.lastModified}),a=new DataTransfer;a.items.add(o),e.files=a.files})(t,r))),i.addEventListener("click",(()=>((e,t)=>{e.value="",t.value=""})(t,r))))};e("#quick-reply #qr-post-formatting input.btn{display:none}#quick-reply #qr-post-formatting .formatting-labels{display:flex;flex-wrap:nowrap;gap:4px;padding:2px 4px 4px}#quick-reply #qr-post-formatting .formatting-labels label{flex:1;font-size:.75rem;line-height:1rem;text-align:center;text-transform:uppercase;border:1px solid;border-radius:2px;background-color:#fff;cursor:pointer}");const n=e=>{const{id:t,name:n,value:r}=e;return`<label title="${r}" for="${t}">${n}</label>`},r=e=>{if(e.target!==e.currentTarget)return;const t=document.querySelector("#quick-reply textarea[name='body']");t&&t.focus()},i=()=>{(()=>{const e=document.querySelector("#quick-reply textarea[name='body']"),t=document.querySelector("#quick-reply input#upload_file");null==e||e.addEventListener("paste",(e=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(!r||r.length>1)return;const i=r[0];if(!i.type.startsWith("image/"))return;const l=i.getAsFile();if(!l||!t)return;const o=new DataTransfer;o.items.add(l),t.files=o.files}))})(),t(),(()=>{const e=document.querySelector("#quick-reply tr:has(input[name='b'])");if(!e)return;e.id="qr-post-formatting";const t=e.querySelectorAll("input.btn");if(t.length<1)return;const i=t[0].parentElement;i.insertAdjacentHTML("beforeend","<div class='formatting-labels'></div>");const l=i.lastElementChild;for(const e of t){e.id="quick-reply-"+e.name+"-btn",l.insertAdjacentHTML("beforeend",n(e));const t=l.lastElementChild;if(!t)return;t.addEventListener("click",r)}})()};try{((e,t,n=!1)=>{if(document.body.querySelector(e))return void t();new MutationObserver(((r,i)=>{for(const l of r)for(const r of l.addedNodes)if(1===r.nodeType&&r.matches(e))return t(),void(n&&i.disconnect())})).observe(document.body,{childList:!0,subtree:!0})})("#quick-reply",i)}catch(e){console.log("[quick-reply]",e)}}();
//# sourceMappingURL=quick-reply.js.map
