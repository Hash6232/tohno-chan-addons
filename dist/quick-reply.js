!function(){"use strict";function e(e){if(!e)return;if("undefined"==typeof window)return;const t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}e('#quick-reply #upload{background-color:#fff;border:1px solid}#quick-reply #upload>td{cursor:text}#quick-reply #upload #upload_file{display:none}#quick-reply #upload #upload_filename{border:none;outline:none}#quick-reply #upload:has(#upload_filename:placeholder-shown)>:last-child{display:none}#quick-reply #upload .spoiler{padding-right:0}#quick-reply #upload .spoiler>*{vertical-align:middle}#quick-reply #upload .spoiler label{font-size:0;line-height:0}#quick-reply #upload .spoiler label::after{content:"S";font-size:16px;vertical-align:middle}#quick-reply #upload .spoiler input:not(:checked),#quick-reply #upload .spoiler input:checked~label{display:none}');const t=()=>{const e=document.querySelector("#quick-reply"),t=document.querySelector("#quick-reply #upload_file"),n=document.querySelector("#quick-reply #upload");if(!t||!n)return;t.insertAdjacentHTML("afterend",'<input id="upload_filename" type="text" name="filename" placeholder="No file selected." />');const l=document.getElementById("upload_filename");n.insertAdjacentHTML("beforeend",'<td><a id="reset-qr-fileinput" href="javascript:;" title="Remove attachment">Ã—</a></td>');const r=document.getElementById("reset-qr-fileinput");e&&l&&r&&(l.addEventListener("click",(()=>(e=>{var t,n;(null!==(n=null===(t=e.files)||void 0===t?void 0:t.length)&&void 0!==n?n:1)>0||e.click()})(t))),t.addEventListener("change",(()=>((e,t)=>{var n,l;if((null!==(l=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==l?l:0)<1)return;t.value=e.files[0].name;const r=t.value.length;t.setSelectionRange(r,r)})(t,l))),t.addEventListener("cancel",(()=>(e=>{e.blur()})(l))),e.addEventListener("submit",(()=>((e,t)=>{var n,l;if((null!==(l=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==l?l:0)<1)return;const r=e.files[0],i=t.value,o=new File([r],i,{type:r.type,lastModified:r.lastModified}),a=new DataTransfer;a.items.add(o),e.files=a.files})(t,l))),r.addEventListener("click",(()=>((e,t)=>{e.value="",t.value=""})(t,l))))};e("#quick-reply #qr-post-formatting input.btn{display:none}#quick-reply #qr-post-formatting .formatting-labels{display:flex;flex-wrap:nowrap;gap:4px;padding:2px 4px 4px}#quick-reply #qr-post-formatting .formatting-labels label{flex:1;font-size:.75rem;line-height:1rem;text-align:center;text-transform:uppercase;border:1px solid;border-radius:2px;background-color:#fff;cursor:pointer}");const n=e=>{const{id:t,name:n,value:l}=e;return`<label title="${l}" for="${t}">${n}</label>`},l=e=>{if(e.target!==e.currentTarget)return;const t=document.querySelector("#quick-reply textarea[name='body']");t&&t.focus()},r=()=>{if(!document.querySelector("body > form[name='post']"))return;const e=document.querySelector("#quick-reply a.close-btn");e&&e.addEventListener("click",(()=>(()=>{const e=document.querySelector("body > form[name='post'] textarea[name='body']");e&&(e.value="")})()))};e("#quick-reply>hr{display:none}#quick-reply tr:last-of-type{display:none}");const i=()=>{r(),(()=>{const e=document.querySelector("#quick-reply textarea[name='body']"),t=document.querySelector("#quick-reply #upload_file");null==e||e.addEventListener("paste",(e=>{var n;const l=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(!l||l.length>1)return;const r=l[0];if(!r.type.startsWith("image/"))return;const i=r.getAsFile();if(!i||!t)return;const o=new DataTransfer;o.items.add(i),t.files=o.files}))})(),t(),(()=>{const e=document.querySelector("#quick-reply tr:has(input[name='b'])");if(!e)return;e.id="qr-post-formatting";const t=e.querySelectorAll("input.btn");if(t.length<1)return;const r=t[0].parentElement;r.insertAdjacentHTML("beforeend","<div class='formatting-labels'></div>");const i=r.lastElementChild;for(const e of t){e.id="quick-reply-"+e.name+"-btn",i.insertAdjacentHTML("beforeend",n(e));const t=i.lastElementChild;if(!t)return;t.addEventListener("click",l)}})()};try{((e,t,n=!1)=>{if(document.body.querySelector(e))return void t();new MutationObserver(((l,r)=>{for(const i of l)for(const l of i.addedNodes)if(1===l.nodeType&&l.matches(e))return t(),void(n&&r.disconnect())})).observe(document.body,{childList:!0,subtree:!0})})("#quick-reply",i)}catch(e){console.log("[quick-reply]",e)}}();
//# sourceMappingURL=quick-reply.js.map
