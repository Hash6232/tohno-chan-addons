!function(){"use strict";function e(e){if(!e)return;if("undefined"==typeof window)return;const t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}e("#quick-reply input#upload_file{display:none}#quick-reply:has(input#upload_filename:placeholder-shown) tr#upload>:last-child{display:none}");const t=()=>{const e=document.querySelector("#quick-reply"),t=document.querySelector("#quick-reply input#upload_file"),n=document.querySelector("#quick-reply tr#upload");if(!t||!n)return;t.insertAdjacentHTML("afterend",'<input id="upload_filename" type="text" name="filename" placeholder="No file selected." />');const i=document.getElementById("upload_filename");n.insertAdjacentHTML("beforeend",'<td><a id="reset-qr-fileinput" href="javascript:;" title="Remove attachment">Ã—</a></td>');const r=document.getElementById("reset-qr-fileinput");e&&i&&r&&(i.addEventListener("click",(()=>(e=>{var t,n;(null!==(n=null===(t=e.files)||void 0===t?void 0:t.length)&&void 0!==n?n:1)>0||e.click()})(t))),t.addEventListener("change",(()=>((e,t)=>{var n,i;if((null!==(i=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==i?i:0)<1)return;t.value=e.files[0].name;const r=t.value.length;t.setSelectionRange(r,r)})(t,i))),e.addEventListener("submit",(()=>((e,t)=>{var n,i;if((null!==(i=null===(n=e.files)||void 0===n?void 0:n.length)&&void 0!==i?i:0)<1)return;const r=e.files[0],l=t.value,o=new File([r],l,{type:r.type,lastModified:r.lastModified}),a=new DataTransfer;a.items.add(o),e.files=a.files})(t,i))),r.addEventListener("click",(()=>((e,t)=>{e.value="",t.value=""})(t,i))))};e("#quick-reply #qr-post-formatting input.btn{display:none}#quick-reply #qr-post-formatting .formatting-labels{display:flex;flex-wrap:nowrap;gap:4px;padding:2px 4px 4px}#quick-reply #qr-post-formatting .formatting-labels label{flex:1;font-size:.75rem;line-height:1rem;text-align:center;text-transform:uppercase;border:1px solid;border-radius:2px;background-color:#fff;cursor:pointer}");const n=e=>{const{id:t,name:n,value:i}=e;return`<label title="${i}" for="${t}">${n}</label>`},i=()=>{(()=>{const e=document.querySelector("#quick-reply textarea[name='body']"),t=document.querySelector("#quick-reply input#upload_file");null==e||e.addEventListener("paste",(e=>{var n;const i=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(!i||i.length>1)return;const r=i[0];if(!r.type.startsWith("image/"))return;const l=r.getAsFile();if(!l||!t)return;const o=new DataTransfer;o.items.add(l),t.files=o.files}))})(),t(),(()=>{const e=document.querySelector("#quick-reply tr:has(input[name='b'])");if(!e)return;e.id="qr-post-formatting";const t=e.querySelectorAll("input.btn");if(t.length<1)return;const i=t[0].parentElement;i.insertAdjacentHTML("beforeend","<div class='formatting-labels'></div>");const r=i.lastElementChild;for(const e of t)e.id="quick-reply-"+e.name+"-btn",r.insertAdjacentHTML("beforeend",n(e))})()};try{((e,t,n=!1)=>{if(document.body.querySelector(e))return void t();new MutationObserver(((i,r)=>{for(const l of i)for(const i of l.addedNodes)if(1===i.nodeType&&i.matches(e))return t(),void(n&&r.disconnect())})).observe(document.body,{childList:!0,subtree:!0})})("#quick-reply",i)}catch(e){console.log("[quick-reply]",e)}}();
//# sourceMappingURL=quick-reply.js.map
