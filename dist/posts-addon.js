!function(){"use strict";var e,t,o;!function(e){var t;e.isImage=e=>e.type.startsWith("image/"),e.getDataURL=e=>new Promise(((t,o)=>{const n=new FileReader;n.addEventListener("load",(({target:e})=>{t(e?.result)})),n.addEventListener("error",(e=>{o(e)})),n.readAsDataURL(e)})),(e.Clipboard||(e.Clipboard={})).getImage=t=>{if(1!==t.files.length)return null;const o=t.files[0];return e.isImage(o)?o:null},(e.Fetch||(e.Fetch={})).getImage=async t=>{try{const o=await fetch(t);if(!o.ok)throw new Error("Request failed with status code: "+o.status);const n=await o.blob();if(!e.isImage(n))throw new Error("Wrong file type: "+n.type);const r=new URL(t).pathname.split("/").pop()??"file";return new File([n],r,{type:n.type})}catch(e){console.log(e)}},(t=e.Form||(e.Form={})).hasFile=e=>(e.files?.length??0)>0,t.getFiles=e=>t.hasFile(e)?e.files:null,t.addFile=(e,t)=>{const o=new DataTransfer;o.items.add(t),e.files=o.files,e.dispatchEvent(new Event("change",{bubbles:!0}))}}(e||(e={})),function(e){e.onContentLoaded=(e,t)=>{for(const o of[t].flat())if(o)return void e();document.addEventListener("DOMContentLoaded",(()=>e()))},e.onElementLoaded=(e,t,o=!1)=>{if(document.body.querySelector(t))return void e();new MutationObserver(((n,r)=>{for(const a of n)for(const n of a.addedNodes)if(1===n.nodeType&&n.matches(t))return e(),void(o&&r.disconnect())})).observe(document.body,{childList:!0,subtree:!0})},e.onElementVisible=(e,t,o)=>{new IntersectionObserver(((e,o)=>{e.forEach((e=>{if(e.isIntersecting&&1===e.target.nodeType){for(const o of t)o(e.target);o.unobserve(e.target)}}))}),o??{root:null,rootMargin:"0px",threshold:.1}).observe(e)}}(t||(t={})),function(e){e.dateStringToRelative=e=>{const t=new Date,o=new Date(e),n=Math.floor((t.getTime()-o.getTime())/1e3);return((e,t)=>{const o=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),n=t?-1:1;if(e<60)return o.format(e*n,"second");const r=Math.floor(e/60);if(r<60)return o.format(r*n,"minute");const a=Math.floor(r/60);if(a<24)return o.format(a*n,"hour");const s=Math.floor(a/24);if(s<30)return o.format(s*n,"day");const i=Math.floor(s/30);if(i<12)return o.format(i*n,"month");const l=Math.floor(s/365);return o.format(l*n,"year")})(Math.abs(n),n>0)}}(o||(o={}));const n=e=>{const t=e.currentTarget;t&&(t.title=o.dateStringToRelative(t.dateTime))},r=e=>{const t=e.querySelector("time");t&&t.addEventListener("mouseenter",n)},a=()=>{document.querySelectorAll("body > form[name='postcontrols'] .thread .post:not(.hidden)").forEach((e=>t.onElementVisible(e,[r])))};try{t.onContentLoaded(a,"body > form[name='post']")}catch(e){console.log("[posts-addon]",e)}}();
//# sourceMappingURL=posts-addon.js.map
